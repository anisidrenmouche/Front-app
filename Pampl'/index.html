<!DOCTYPE html>
<html lang="fr">
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
        <meta name="description" content="" />
        <meta name="author" content="" />
        <title>Pampl'!</title>
        <link rel="icon" type="image/x-icon" href="assets/img/favicon.ico" />
        <!-- Font Awesome icons (free version)-->
        <script src="https://use.fontawesome.com/releases/v5.15.1/js/all.js" crossorigin="anonymous"></script>
        <!-- Google fonts-->
        <link href="https://fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet" type="text/css" />
        <link href="https://fonts.googleapis.com/css?family=Droid+Serif:400,700,400italic,700italic" rel="stylesheet" type="text/css" />
        <link href="https://fonts.googleapis.com/css?family=Roboto+Slab:400,100,300,700" rel="stylesheet" type="text/css" />
        <script src='https://api.tiles.mapbox.com/mapbox-gl-js/v2.0.1/mapbox-gl.js'></script>
        <link href='https://api.tiles.mapbox.com/mapbox-gl-js/v2.0.1/mapbox-gl.css' rel='stylesheet'/>
        <script src="https://api.mapbox.com/mapbox-gl-js/v2.0.1/mapbox-gl.js"></script>
        <link href="https://api.mapbox.com/mapbox-gl-js/v2.0.1/mapbox-gl.css" rel="stylesheet" />
       
        <link href='https://api.mapbox.com/mapbox-gl-js/v2.0.1/mapbox-gl.css' rel='stylesheet'/>
        
        <!-- Core theme CSS (includes Bootstrap)-->
        <link href="css/styles.css" rel="stylesheet" />
    </head>
    <body id="page-top">
        
        <!-- Navigation-->
        <nav class="navbar navbar-expand-lg navbar-dark fixed-top" id="mainNav">
            <div class="container">
                <a class="navbar-brand js-scroll-trigger" href="#page-top"><img src="assets/img/black logo.png" alt="" /></a>
                <button class="navbar-toggler navbar-toggler-right" type="button" data-toggle="collapse" data-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
                    Menu
                    <i class="fas fa-bars ml-1"></i>
                </button>
                <div class="collapse navbar-collapse" id="navbarResponsive">
                    <ul class="navbar-nav text-uppercase ml-auto">
                        <li class="nav-item"><a class="nav-link js-scroll-trigger" href="#services">Nos-Services</a></li>
                        <li class="nav-item"><a class="nav-link js-scroll-trigger" href="#portfolio">Notre application</a></li>
                       <!--<li class="nav-item"><a class="nav-link js-scroll-trigger" href="#about"></a></li>--> 
                        <li class="nav-item"><a class="nav-link js-scroll-trigger" href="#team">Notre équipe</a></li>
                        <li class="nav-item"><a class="nav-link js-scroll-trigger" href="#contact">Contact</a></li>
                        <a href="#" class="nav-link smoothScroll" data-toggle="modal" data-target="#modalInscription" style="color: black;">Inscription</a>
                    </ul>
                </div>
            </div>
        </nav>
        <!-- Masthead-->
        <header class="masthead">
            <div class="container">
                <div class="masthead-subheading"></div>
                <div class="masthead-heading text-uppercase"></div>
            </div>
        </header>

        <div class="modal fade" id="modalInscription" tabindex="-1" role="dialog" aria-labelledby="modalInscriptionLabel" aria-hidden="true">
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="exampleModalLabel">Inscription</h5>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                    <div class="modal-body">
                        <form action="" class="">
                            <div class="form-group">
                                <label for="email">Email</label>
                                <input type="email" class="form-control" name="email" id="email">
                            </div>
                            <div class="form-group">
                                <label for="password">Mot de passe</label>
                                <input type="password" class="form-control" name="password" id="password">
                            </div>
                        </form>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-dismiss="modal">Fermer</button>
                        <button onclick="sendInscription()" type="button" class="btn btn-primary">Valider Inscription</button>
                    </div>
                </div>
            </div>
        </div>
        <!-- Services-->
        <section class="page-section" id="services">
            <div class="container">
                <div class="text-center">
                    <h2 class="section-heading text-uppercase">Nos services </h2>
                </div>
                <div class="row text-center">
                    <div class="col-md-4">
                        <span class="fa-stack fa-4x">
                            <i class="fas fa-circle fa-stack-2x text-primary"></i>
                            <i class="fas fa-shopping-cart fa-stack-1x fa-inverse"></i>
                        </span>
                        <h4 class="my-3">Réservez en ligne</h4>
                        <p class="text-muted"> </p>
                    </div>
                    <div class="col-md-4">
                        <span class="fa-stack fa-4x">
                            <i class="fas fa-circle fa-stack-2x text-primary"></i>
                            <i class="fas fa-laptop fa-stack-1x fa-inverse"></i>
                        </span>
                        <h4 class="my-3">Responsive Design</h4>
                    </div>
                    <div class="col-md-4">
                        <span class="fa-stack fa-4x">
                            <i class="fas fa-circle fa-stack-2x text-primary"></i>
                            <i class="fas fa-lock fa-stack-1x fa-inverse"></i>
                        </span>
                        <h4 class="my-3">Web Security</h4>
                        <p class="text-muted"></p>
                    </div>
                </div>
            </div>
        </section>

        <img src="assets/img/pamplapplication2.png" class="img-fluid" alt="Responsive image">

    

      
        

        <!-- Portfolio Grid-->
        <section class="page-section bg-light" id="portfolio">
            <div class="container">
                <div class="text-center">
                    <h2 class="section-heading text-uppercase">Notre application</h2>
                   </div>
                   </div>
        </section>
        <img src="assets/img/pamplapplication.png" class="img-fluid" alt="Responsive image">

        
        <!-- About-->
        
        <!-- Team-->
        <section class="page-section bg-light" id="team">
            <div class="container">
                <div class="text-center">
                    <h2 class="section-heading text-uppercase">Notre équipe</h2>
                    <h3 class="section-subheading text-muted">Lorem ipsum dolor sit amet consectetur.</h3>
                </div>
                <div class="row">
                    <div class="col-lg-4">
                        <div class="team-member">
                            <img class="mx-auto rounded-circle" src="assets/img/team/1.jpg" alt="" />
                            <h4>Kay Garland</h4>
                            <p class="text-muted">Lead Designer</p>
                            <a class="btn btn-dark btn-social mx-2" href="#!"><i class="fab fa-twitter"></i></a>
                            <a class="btn btn-dark btn-social mx-2" href="#!"><i class="fab fa-facebook-f"></i></a>
                            <a class="btn btn-dark btn-social mx-2" href="#!"><i class="fab fa-linkedin-in"></i></a>
                        </div>
                    </div>
                    <div class="col-lg-4">
                        <div class="team-member">
                            <img class="mx-auto rounded-circle" src="assets/img/team/2.jpg" alt="" />
                            <h4>Larry Parker</h4>
                            <p class="text-muted">Lead Marketer</p>
                            <a class="btn btn-dark btn-social mx-2" href="#!"><i class="fab fa-twitter"></i></a>
                            <a class="btn btn-dark btn-social mx-2" href="#!"><i class="fab fa-facebook-f"></i></a>
                            <a class="btn btn-dark btn-social mx-2" href="#!"><i class="fab fa-linkedin-in"></i></a>
                        </div>
                    </div>
                    <div class="col-lg-4">
                        <div class="team-member">
                            <img class="mx-auto rounded-circle" src="assets/img/team/3.jpg" alt="" />
                            <h4>Diana Petersen</h4>
                            <p class="text-muted">Lead Developer</p>
                            <a class="btn btn-dark btn-social mx-2" href="#!"><i class="fab fa-twitter"></i></a>
                            <a class="btn btn-dark btn-social mx-2" href="#!"><i class="fab fa-facebook-f"></i></a>
                            <a class="btn btn-dark btn-social mx-2" href="#!"><i class="fab fa-linkedin-in"></i></a>
                        </div>
                    </div>
                </div>
                
            </div>
        </section>
        <!-- Clients-->
        <h2 class="section-heading text-uppercase" style="
        text-align: center; margin-top:54px;
    ">Ils nous font confiance</h2>
        <div class="py-5">
            
            <div class="container">
                
                <div class="row">
                    
                    <div class="col-md-3 col-sm-6 my-3">
                        <a href="#!"><img class="img-fluid d-block mx-auto" src="assets/img/logos/envato.jpg" alt="" /></a>
                    </div>
                    <div class="col-md-3 col-sm-6 my-3">
                        <a href="#!"><img class="img-fluid d-block mx-auto" src="assets/img/logos/designmodo.jpg" alt="" /></a>
                    </div>
                    <div class="col-md-3 col-sm-6 my-3">
                        <a href="#!"><img class="img-fluid d-block mx-auto" src="assets/img/logos/themeforest.jpg" alt="" /></a>
                    </div>
                    <div class="col-md-3 col-sm-6 my-3">
                        <a href="#!"><img class="img-fluid d-block mx-auto" src="assets/img/logos/creative-market.jpg" alt="" /></a>
                    </div>
                </div>
            </div>
        </div>

        <h2 class="section-heading text-uppercase" style="
        text-align: center; margin-top:54px;
    ">Nos trotinettes</h2>

    
        <div id='map' style='width: 100; height: 600px;'></div>
        <!-- Contact-->
        <section class="page-section" id="contact">
            <div class="container">
                <div class="text-center">
                    <h2 class="section-heading text-uppercase">contactez-nous</h2>
                    <h3 class="section-subheading text-muted"></h3>
                </div>
                <form id="contactForm" name="sentMessage" novalidate="novalidate">
                    <div class="row align-items-stretch mb-5">
                        <div class="col-md-6">
                            <div class="form-group">
                                <input class="form-control" id="name" type="text" placeholder="Votre nom *" required="required" data-validation-required-message="Votre nom." />
                                <p class="help-block text-danger"></p>
                            </div>
                            <div class="form-group">
                                <input class="form-control" id="email" type="email" placeholder="Votre adresse email *" required="required" data-validation-required-message="Votre adresse email." />
                                <p class="help-block text-danger"></p>
                            </div>
                            <div class="form-group mb-md-0">
                                <input class="form-control" id="phone" type="tel" placeholder="Votre numéro de telephone *" required="required" data-validation-required-message="Votre numéro de telephone." />
                                <p class="help-block text-danger"></p>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="form-group form-group-textarea mb-md-0">
                                <textarea class="form-control" id="message" placeholder="Votre message *" required="required" data-validation-required-message="Votre message."></textarea>
                                <p class="help-block text-danger"></p>
                            </div>
                        </div>
                    </div>
                    <div class="text-center">
                        <div id="success"></div>
                        <button class="btn btn-primary btn-xl text-uppercase" id="sendMessageButton" type="submit">envoyer le message</button>
                    </div>
                </form>
            </div>
        </section>

        <!-- Footer-->
        <footer class="footer py-4">
            <div class="container">
                <div class="row align-items-center">
                    <div class="col-lg-4 text-lg-left">Copyright © Pampl'! 2021</div>
                    <div class="col-lg-4 my-3 my-lg-0">
                        <a class="btn btn-dark btn-social mx-2" href="#!"><i class="fab fa-twitter"></i></a>
                        <a class="btn btn-dark btn-social mx-2" href="#!"><i class="fab fa-facebook-f"></i></a>
                        <a class="btn btn-dark btn-social mx-2" href="#!"><i class="fab fa-linkedin-in"></i></a>
                    </div>
                    <div class="col-lg-4 text-lg-right">
                        <a class="mr-3" href="#!">Politique de confidentialité
                        </a>
                        <a href="#!">Conditions d'utilisation
                        </a>
                    </div>
                </div>
            </div>
        </footer>

        
      
       


        </div>
        <!-- Bootstrap core JS-->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.bundle.min.js"></script>
        <!-- Third party plugin JS-->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-easing/1.4.1/jquery.easing.min.js"></script>
        <script src='https://api.mapbox.com/mapbox-gl-js/v2.0.1/mapbox-gl.js'></script>
        <!-- Contact form JS-->
        <script src="assets/mail/jqBootstrapValidation.js"></script>
        <script src="assets/mail/contact_me.js"></script>
        <!-- Core theme JS-->
        <script src="js/scripts.js"></script>



 
         <script>

             // je recuprer le token ici 
            mapboxgl.accessToken = 'pk.eyJ1IjoiYW5pc2lkcmVubW91Y2hlIiwiYSI6ImNra3F6dzRvdjA5eHcyb251ZGNnd25ka2MifQ.YtRmU6ExydKt_bKNkaUNkQ';
var map = new mapboxgl.Map({

    // je recuprer la map  grace au param (mapboxgl), je peux modifier le style 
container: 'map', style: 'mapbox://styles/mapbox/streets-v11', // stylesheet location
center: [
    // je la localisation de paris
2.362900, 48.834900
], // starting position [lng, lat]
zoom: 10.46 // starting zoom
});
 
// Get trotinettes

// la partie qui va concerne les point pour placer les poits, j'initialise l'objet est je boucle 
var textnode;
geojson = {
type: 'FeatureCollection',
features: []
};

// Symfony api


mapboxgl.accessToken = 'pk.eyJ1IjoiYW5pc2lkcmVubW91Y2hlIiwiYSI6ImNra3F6dzRvdjA5eHcyb251ZGNnd25ka2MifQ.YtRmU6ExydKt_bKNkaUNkQ';
var map = new mapboxgl.Map({
container: 'map', // container id
style: 'mapbox://styles/mapbox/streets-v11',
center: [-26,36.8], // starting position
zoom: 3 // starting zoom
});
 
// Add geolocate control to the map.
map.addControl(
new mapboxgl.GeolocateControl({
positionOptions: {
enableHighAccuracy: true
},
trackUserLocation: true
})
);
	


myHeaders = new Headers({
'Authorization': 'Token' + "eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiJ9.eyJpYXQiOjE2MTI0MzE2MzAsImV4cCI6MTYxMjQzNTIzMCwicm9sZXMiOlsiVXNlciIsIlJPTEVfVVNFUiJdLCJ1c2VybmFtZSI6ImFnZmRnZGRmZ2dmZ2ZAaG90bWFpbC5mciJ9.Q6qz6zoMjD9w6-946GI7iHxc5-eVjdO_W5dSbIYuYlJXw2iI7_T-Lf9Szf106aibGYJU8XgPn-LWBaB5WUBaJYQyoGlY2CGsUAuOonpqzxS-c5O-n0igmsTX4Xmtae-ltb_L9JCy2lDN110h97lM5ZeSMD0xCW5lo5dtN-hpfCtuJLR3q0Py-PxBLc1RgKO8C9ml12-Hnt8qtsAFFISrDwz4CPCV3lU4uAdf-3v8-UoMnxPDAsmsFjzkUXQGlfA_i9lgEFOae6YCTsDL8SwwbJp-GNdS6RBlLWz9COZtCyYTYMWL_ZodzsvUXNPZeRwLl1jfyTh7n7YAVnviX-O0d5tm5RJcM6xoIZPeDI61cxOK2HPtCpB3845-MrztXA52cd5gUjcAqzRgwY9DWgFQoxhEXLrk6W97m9qNoiQYML6Al7mdcWZDkOY9FItnUciBT3NkkqgT_hJphM_eLd5s06fLxaIWNs_7EWzTWEGqg0OWhajpD7q6ax134dXOxXatw8FSKdjUCZ9ZeMVJBuhq9tP-TgFIK1ixKrOONwWGpgltCGB1SrBwExltFXaBHeeQbaZqMjCOksUTo4mybASsvalgCbEQNdmE9V6wMzM7lBoknHtx68PLJniGrUmXD39FFl5j70bbvPTTFIK-UPddjT7nMNin9MOA-LnwNE_ql1A",
'Content-Type': 'Access-Control-Allow-Origin: *'
});
fetch('https://127.0.0.1:8000/api/trotinettes.json', {myHeaders}).then((response) => {
return response.json();
}).then((myJson) => {

// pour afficher le debug
console.log(myJson);
// si index est inferieur a la taille du tableau qui contient les information que nous recuprerons alors on rajoute 1
for (let index = 0; index < myJson.length; index++) {
var element = myJson[index];
console.log(element)
 
//  je recuprere les localisation en les transformant en texte  et puis je les mets dans l'objet geojson 
textnode += element.id + " : " + element.localisation;
    console.log(element.id);
        var textnode = document.createTextNode(textnode)
        // split pour separer une chaine de caractere elle les separe pour creer un tableau 
            localisationFormat = element.localisation.split(",");
                console.log(localisationFormat);
 
geojson.features.push({
type: 'Feature',
geometry: {
type: 'Point',
coordinates: [
localisationFormat[0], localisationFormat[1]
]
},
properties: {
title: 'Mapbox',
description: 'Paris.'
}
})
 
console.log(geojson);
}
geojson.features.forEach(function (marker) { // create a HTML element for each feature
var el = document.createElement('div');
el.className = 'marker';
// make a marker for each feature and add to the map
new mapboxgl.Marker(el).setLngLat(marker.geometry.coordinates).addTo(map);
});
});


    function sendInscription() {
        var email = document.getElementById("email").value;
        var password = document.getElementById("password").value;
        (async () => {
        const rawResponse = await fetch('https://127.0.0.1:8000/api/users', {
        method: 'POST',
            // l'entete de la requet

        headers: {
        'Content-Type': 'application/json'
        },
        crossDomain: true,
            //body c'est le contenu / stringify il transforme ce qu'il ya entre les parentaise 

        body: JSON.stringify(
            // le premier c'est nom du champs c'est comme le 0 pour le password c'est comme si c'etait l'idince 1
        {email: email, password: password, roles: ["roles_user"]}
        )
        });
        const content = await rawResponse.json();
         
        })();
        }
</script>

        </script>
    </body>
</html>
